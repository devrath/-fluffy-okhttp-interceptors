<h1 align="center">ğšğš•ğšğšğšğš¢-ğš˜ğš”ğš‘ğšğšğš™-ğš’ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›ğšœ ğŸ“¡</h1>

<p align="center">
<a><img src="https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/assets/Banner.png"></a>
</p>


<p align="center">
<a><img src="https://img.shields.io/badge/Built%20Using-Kotlin-silver?style=for-the-badge&logo=kotlin"></a>
<a><img src="https://img.shields.io/badge/Built%20By-Android%20Studio-red?style=for-the-badge&logo=android%20studio"></a>  
<a><img src="https://img.shields.io/badge/Tool-OkHttp-green?style=for-the-badge&logo=tools"></a>  
<a><img src="https://img.shields.io/badge/OkHttp%20Interceptors-purple?style=for-the-badge&logo=tools"></a>  
</p>


<p align="center">
<a>ğŸ“¡ ğ™·ğš˜ğš  ğšğš˜ ğšğšœğš ğ™¾ğš”ğš‘ğšğšğš™ ğš’ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›ğšœ ğšğš˜ğš› ğš—ğšğšğš ğš˜ğš›ğš” ğš›ğšğššğšğšğšœğšğšœ, ğš•ğš˜ğš ğšğš‘ğšğš–, ğšŠğš—ğš ğš–ğš˜ğšğš’ğšğš¢ ğšğš‘ğšğš– ğšŠğšœ ğš›ğšğššğšğš’ğš›ğšğš ğš’ğš— ğ™°ğš—ğšğš›ğš˜ğš’ğš</a>
</p>

---

<div align="center">
  
| Topics |
| ------ |
| [```ğš†ğš‘ğšŠğš ğš’ğšœ ğ™¾ğš”ğ™·ğšğšğš™ ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›```](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/README.md#%F0%9D%9A%86%F0%9D%9A%91%F0%9D%9A%8A%F0%9D%9A%9D-%F0%9D%9A%92%F0%9D%9A%9C-%F0%9D%99%BE%F0%9D%9A%94%F0%9D%99%B7%F0%9D%9A%9D%F0%9D%9A%9D%F0%9D%9A%99-%F0%9D%99%B8%F0%9D%9A%97%F0%9D%9A%9D%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8C%F0%9D%9A%8E%F0%9D%9A%99%F0%9D%9A%9D%F0%9D%9A%98%F0%9D%9A%9B) |
| [```ğ™²ğš‘ğšŠğš’ğš—ğš’ğš—ğš ğ™¾ğš”ğ™·ğšğšğš™ ğš’ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›```](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/README.md#%F0%9D%99%B2%F0%9D%9A%91%F0%9D%9A%8A%F0%9D%9A%92%F0%9D%9A%97%F0%9D%9A%92%F0%9D%9A%97%F0%9D%9A%90-%F0%9D%99%BE%F0%9D%9A%94%F0%9D%99%B7%F0%9D%9A%9D%F0%9D%9A%9D%F0%9D%9A%99-%F0%9D%9A%92%F0%9D%9A%97%F0%9D%9A%9D%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8C%F0%9D%9A%8E%F0%9D%9A%99%F0%9D%9A%9D%F0%9D%9A%98%F0%9D%9A%9B) |
| [```ğš†ğš‘ğšŠğš ğšŠğš›ğš ğšğš‘ğš ğšğš’ğšğšğšğš›ğšğš—ğš ğšğš¢ğš™ğšğšœ ğš˜ğš ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›ğšœ```](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/README.md#%F0%9D%9A%86%F0%9D%9A%91%F0%9D%9A%8A%F0%9D%9A%9D-%F0%9D%9A%8A%F0%9D%9A%9B%F0%9D%9A%8E-%F0%9D%9A%9D%F0%9D%9A%91%F0%9D%9A%8E-%F0%9D%9A%8D%F0%9D%9A%92%F0%9D%9A%8F%F0%9D%9A%8F%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8E%F0%9D%9A%97%F0%9D%9A%9D-%F0%9D%9A%9D%F0%9D%9A%A2%F0%9D%9A%99%F0%9D%9A%8E%F0%9D%9A%9C-%F0%9D%9A%98%F0%9D%9A%8F-%F0%9D%99%B8%F0%9D%9A%97%F0%9D%9A%9D%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8C%F0%9D%9A%8E%F0%9D%9A%99%F0%9D%9A%9D%F0%9D%9A%98%F0%9D%9A%9B%F0%9D%9A%9C) |
| [```ğš†ğš‘ğšŠğš ğš’ğšœ ğšŠğš— ğ™°ğš—ğšŠğš•ğš¢ğšğš’ğšŒğšœ ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›```](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/README.md#%F0%9D%9A%86%F0%9D%9A%91%F0%9D%9A%8A%F0%9D%9A%9D-%F0%9D%9A%92%F0%9D%9A%9C-%F0%9D%9A%8A%F0%9D%9A%97-%F0%9D%99%B0%F0%9D%9A%97%F0%9D%9A%8A%F0%9D%9A%95%F0%9D%9A%A2%F0%9D%9A%9D%F0%9D%9A%92%F0%9D%9A%8C%F0%9D%9A%9C-%F0%9D%99%B8%F0%9D%9A%97%F0%9D%9A%9D%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8C%F0%9D%9A%8E%F0%9D%9A%99%F0%9D%9A%9D%F0%9D%9A%98%F0%9D%9A%9B) |
| [```ğš†ğš‘ğšŠğš ğš’ğšœ ğšŠğš— ğ™°ğ™¿ğ™¸ ğš”ğšğš¢ ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›```](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/README.md#%F0%9D%9A%86%F0%9D%9A%91%F0%9D%9A%8A%F0%9D%9A%9D-%F0%9D%9A%92%F0%9D%9A%9C-%F0%9D%9A%8A%F0%9D%9A%97-%F0%9D%99%B0%F0%9D%99%BF%F0%9D%99%B8-%F0%9D%9A%94%F0%9D%9A%8E%F0%9D%9A%A2-%F0%9D%99%B8%F0%9D%9A%97%F0%9D%9A%9D%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8C%F0%9D%9A%8E%F0%9D%9A%99%F0%9D%9A%9D%F0%9D%9A%98%F0%9D%9A%9B) |
| [```ğš†ğš‘ğšŠğš ğš’ğšœ ğšŠğš— ğ™·ğšƒğšƒğ™¿ ğ™»ğš˜ğšğšğš’ğš—ğš ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›```](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/README.md#%F0%9D%9A%86%F0%9D%9A%91%F0%9D%9A%8A%F0%9D%9A%9D-%F0%9D%9A%92%F0%9D%9A%9C-%F0%9D%9A%8A%F0%9D%9A%97-%F0%9D%99%B7%F0%9D%9A%83%F0%9D%9A%83%F0%9D%99%BF-%F0%9D%99%BB%F0%9D%9A%98%F0%9D%9A%90%F0%9D%9A%90%F0%9D%9A%92%F0%9D%9A%97%F0%9D%9A%90-%F0%9D%99%B8%F0%9D%9A%97%F0%9D%9A%9D%F0%9D%9A%8E%F0%9D%9A%9B%F0%9D%9A%8C%F0%9D%9A%8E%F0%9D%9A%99%F0%9D%9A%9D%F0%9D%9A%98%F0%9D%9A%9B) |

</div>


<div align="center">

| `Representation` | **`ğ™¾ğšğšğš™ğšğš`** |
| ----------- | ----------- |
| <img src="https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/assets/okhttp.png" width="340" height="300"/> | <img src="https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/assets/demo.gif" width="220" height="460"/> |

</div>

## `ğš†ğš‘ğšŠğš ğš’ğšœ ğ™¾ğš”ğ™·ğšğšğš™ ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›`
* OkHttp is a mechanism that helps you `monitor` and re-write network calls.
* In the image below we can see that a call is sent from the application **`->`** Then it is received by the interceptor and modified **`->`** Then further modified call is received at the server.
<p align="center">
  <img src="https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/assets/interceptor1.png">
</p>

## `ğ™²ğš‘ğšŠğš’ğš—ğš’ğš—ğš ğ™¾ğš”ğ™·ğšğšğš™ ğš’ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›`
* We can chain multiple interceptors and modify the request
* Order of the chaining is important
* Okhttp keeps a list of interceptors and processes them in the same order in which they are added
<p align="center">
  <img src="https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/assets/interceptor2.png">
</p>

## `ğš†ğš‘ğšŠğš ğšŠğš›ğš ğšğš‘ğš ğšğš’ğšğšğšğš›ğšğš—ğš ğšğš¢ğš™ğšğšœ ğš˜ğš ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›ğšœ`
There are two types of interceptors 
* Application Interceptors
* Network Interceptors
<p align="center">
  <img src="https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/assets/interceptorstypes.png">
</p>

| **`Application Interceptors`** | **`Network Interceptors`** |
| -- | -- |
| The application interceptors are the type of interceptors that are found between the application and the `okhttp module`. | The network interceptors are the type of interceptors that are found between the `okhttp module` and `remote server`.|
| They are not concerned with the intermediate responses and focus on the final response sent to the application. | They are concerned with the intermediary responses from the time of application making the call and receiving the final response. |

## `ğš†ğš‘ğšŠğš ğš’ğšœ ğšŠğš— ğ™°ğš—ğšŠğš•ğš¢ğšğš’ğšŒğšœ ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›`
* Even here we customize the regular interceptor to send certain specific user data to the server on each API request 

### `ğš„ğšœğš ğšŒğšŠğšœğš`
* Suppose again if we are sending information like `Device-ID`, `OS-version` etc to the server to understand the customer who is using the API service.
* Now again instead of sending these details which can be of any length, we can send it from one place having a common interceptor

### `ğ™´ğš¡ğšŠğš–ğš™ğš•ğš`
```kotlin
class AnalyticsInterceptor(private val context: Context): Interceptor {

    private val APP_VERSION = "X-App-Version"
    private val DEVICE_MODEL = "X-Device-Model"
    private val DEVICE_PLATFORM = "X-Device-Platform"
    private val OS_VERSION = "X-Device-OS-Version"

    override fun intercept(chain: Interceptor.Chain): Response {
        val request: Request = chain.request()

        val requestBuilder: Request.Builder = request.newBuilder()

        val packageInfo = context.packageManager.getPackageInfo(context.packageName, 0)
        val version = packageInfo.versionName

        requestBuilder.addHeader(APP_VERSION, version)
        requestBuilder.addHeader(OS_VERSION, Build.VERSION.SDK_INT.toString())
        requestBuilder.addHeader(DEVICE_MODEL, Build.MODEL)
        requestBuilder.addHeader(DEVICE_PLATFORM, "android")

        return chain.proceed(requestBuilder.build())
    }
}
```

## `ğš†ğš‘ğšŠğš ğš’ğšœ ğšŠğš— ğ™°ğ™¿ğ™¸ ğš”ğšğš¢ ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›`
* There is no such special thing as `ApiKey` or `tolken` Interceptor.
* We customize the interceptor in such a way 

### `ğš„ğšœğš ğšŒğšŠğšœğš` 
* Suppose in every API request we want to pass an auth token to the server in the header.
* We need not have to pass while creating every API request.
* Instead of it we can pass it in a custom interceptor 

### `ğ™´ğš¡ğšŠğš–ğš™ğš•ğš` 
```kotlin
class ApiKeyInterceptor: Interceptor {

    private val apiKeyQueryParameterKey = "api_key"

    override fun intercept(chain: Interceptor.Chain): Response {
        val originalRequest = chain.request()
        val originalUrl = originalRequest.url

        val url = originalUrl.newBuilder()
            .addQueryParameter(apiKeyQueryParameterKey, BuildConfig.THE_MOVIE_DB_API_TOKEN)
            .build()

        val newRequest = originalRequest.newBuilder()
            .url(url)
            .build()

        return chain.proceed(newRequest)
    }
}
```
* Add the object while creating the `okhttp` request 
```kotlin
val okHttpClient = OkHttpClient.Builder()
.readTimeout(REQUEST_TIMEOUT, TimeUnit.SECONDS)
.connectTimeout(REQUEST_TIMEOUT, TimeUnit.SECONDS)
.addInterceptor(ApiKeyInterceptor()) 
```

## `ğš†ğš‘ğšŠğš ğš’ğšœ ğšŠğš— ğ™·ğšƒğšƒğ™¿ ğ™»ğš˜ğšğšğš’ğš—ğš ğ™¸ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›`
* The HTTP Logging Interceptor is an interceptor that helps to log all the HTTP requests that are being sent to the server. 
* It also can log all the responses that are sent from the server to the application.

### `ğ™·ğš˜ğš  ğšğšœğšğšğšğš• ğš’ğšœ ğ™·ğšƒğšƒğ™¿ ğš•ğš˜ğšğšğš’ğš—ğš ğš’ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›`
* It is helpful in debugging the application on network-related issues when building the application.

### `ğš†ğš‘ğšŠğš ğš’ğšœ ğšğšğšğšŠğšŒğšğ™·ğšğšŠğšğšğš› ğš’ğš— ğ™·ğšƒğšƒğ™¿ ğš•ğš˜ğšğšğš’ğš—ğš ğš’ğš—ğšğšğš›ğšŒğšğš™ğšğš˜ğš›.`
* This is the ability to remove certain information from logging in to the terminal.
* For example, we can remove the API key getting logged if it is sent in a request to the server.

### `ğ™´ğš¡ğšŠğš–ğš™ğš•ğš` 

* Add the code 
```kotlin
 val loggingInterceptor = HttpLoggingInterceptor { message -> Timber.tag("OkHttp").d(message) }
      loggingInterceptor.level = HttpLoggingInterceptor.Level.BODY
      loggingInterceptor.redactHeader("x-amz-cf-id")
```

* And add it while building the `okhttp` client
```kotlin
object OkHttpProvider {

  // Timeout for the network requests
  private const val REQUEST_TIMEOUT = 3L

  private var okHttpClient: OkHttpClient? = null

  fun getOkHttpClient(context: Context): OkHttpClient {
    return if (okHttpClient == null) {
      val loggingInterceptor = HttpLoggingInterceptor { message -> Timber.tag("OkHttp").d(message) }
      loggingInterceptor.level = HttpLoggingInterceptor.Level.BODY
      loggingInterceptor.redactHeader("x-amz-cf-id")

      val okHttpClient = OkHttpClient.Builder()
          .readTimeout(REQUEST_TIMEOUT, TimeUnit.SECONDS)
          .connectTimeout(REQUEST_TIMEOUT, TimeUnit.SECONDS)
          .addInterceptor(loggingInterceptor)
          .build()
      OkHttpProvider.okHttpClient = okHttpClient
      okHttpClient
    } else {
      okHttpClient!!
    }
  }
}
```


## **`ğš‚ğšğš™ğš™ğš˜ğš›ğš`** â˜•
ğ™¸ğš ğš¢ğš˜ğš ğšğšğšğš• ğš•ğš’ğš”ğš ğšœğšğš™ğš™ğš˜ğš›ğš ğš–ğš ğšŠ ğšŒğš˜ğšğšğšğš ğšğš˜ğš› ğš–ğš¢ ğšğšğšğš˜ğš›ğšğšœ, ğ™¸ ğš ğš˜ğšğš•ğš ğšğš›ğšğšŠğšğš•ğš¢ ğšŠğš™ğš™ğš›ğšğšŒğš’ğšŠğšğš ğš’ğš.</br>
<a href="https://www.buymeacoffee.com/devrath" target="_blank"><img src="https://www.buymeacoffee.com/assets/img/custom_images/yellow_img.png" alt="ğ™±ğšğš¢ ğ™¼ğš ğ™° ğ™²ğš˜ğšğšğšğš" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>

## **`ğ™²ğš˜ğš—ğšğš›ğš’ğš‹ğšğšğš`** ğŸ™‹â€â™‚ï¸
ğšğšğšŠğš [ğšŒğš˜ğš—ğšğš›ğš’ğš‹ğšğšğš’ğš˜ğš— ğšğšğš’ğšğšğš•ğš’ğš—ğšğšœ](CONTRIBUTING.md) ğšğš˜ğš› ğš–ğš˜ğš›ğš ğš’ğš—ğšğš˜ğš›ğš–ğšŠğšğš’ğš˜ğš— ğš›ğšğšğšŠğš›ğšğš’ğš—ğš ğšŒğš˜ğš—ğšğš›ğš’ğš‹ğšğšğš’ğš˜ğš—.

## **`ğ™µğšğšğšğš‹ğšŠğšŒğš”`** âœï¸ 
ğ™µğšğšŠğšğšğš›ğš ğš›ğšğššğšğšğšœğšğšœ ğšŠğš›ğš ğšŠğš•ğš ğšŠğš¢ğšœ ğš ğšğš•ğšŒğš˜ğš–ğš, [ğ™µğš’ğš•ğš ğšŠğš— ğš’ğšœğšœğšğš ğš‘ğšğš›ğš](https://github.com/devrath/fluffy-okhttp-interceptors/issues/new).

## **`ğ™µğš’ğš—ğš ğšğš‘ğš’ğšœ ğš™ğš›ğš˜ğš“ğšğšŒğš ğšğšœğšğšğšğš•`** ? â¤ï¸
ğš‚ğšğš™ğš™ğš˜ğš›ğš ğš’ğš ğš‹ğš¢ ğšŒğš•ğš’ğšŒğš”ğš’ğš—ğš ğšğš‘ğš â­ ğš‹ğšğšğšğš˜ğš— ğš˜ğš— ğšğš‘ğš ğšğš™ğš™ğšğš› ğš›ğš’ğšğš‘ğš ğš˜ğš ğšğš‘ğš’ğšœ ğš™ğšŠğšğš. âœŒï¸

## **`ğ™»ğš’ğšŒğšğš—ğšœğš`** ![Licence](https://img.shields.io/github/license/google/docsy) :credit_card:
ğšƒğš‘ğš’ğšœ ğš™ğš›ğš˜ğš“ğšğšŒğš ğš’ğšœ ğš•ğš’ğšŒğšğš—ğšœğšğš ğšğš—ğšğšğš› ğšğš‘ğš ğ™°ğš™ğšŠğšŒğš‘ğš ğ™»ğš’ğšŒğšğš—ğšœğš ğŸ¸.ğŸ¶ - ğšœğšğš ğšğš‘ğš [ğ™»ğ™¸ğ™²ğ™´ğ™½ğš‚ğ™´](https://github.com/devrath/fluffy-okhttp-interceptors/blob/main/LICENSE) ğšğš’ğš•ğš ğšğš˜ğš› ğšğšğšğšŠğš’ğš•ğšœ.


<p align="center">
<a><img src="https://forthebadge.com/images/badges/built-for-android.svg"></a>
</p>
